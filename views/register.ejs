<!DOCTYPE html>
<html>
<head>
  <title>Registration Form</title>
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>
</head>
<body>
  <div x-data="{
    username: '',
    password: '',
    message: '',
    register() {
      fetch('/api/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          username: this.username,
          password: this.password,
        }),
      })
        .then(response => {
            // console.log(response.status);
          if (response.status === 201) {
            alert('Registration successful')
            window.location.href = '/';
          } else {
            return response.json();
          }
        })
        .then(data => {
          if (data) {
            this.message = data.message;
          }
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }
  }">
    <h2>Registration Form</h2>
    <form @submit.prevent="register">
      <div>
        <label for="username">Username:</label>
        <input type="text" id="username" x-model="username" required>
      </div>
      <div>
        <label for="password">Password:</label>
        <input type="password" id="password" x-model="password" required>
      </div>
      <button type="submit">Register</button>
    </form>
    <p x-text="message"></p>
  </div>
</body>
</html>
